<!-- adgoMain/templates/adgoMain/channel_stats.html -->
<!DOCTYPE html>
<html>
  <head>
    <title>{{ channel_stats.title }} - YouTube Stats</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 40px;
      }
      table {
        border-collapse: collapse;
        width: 100%;
        margin-top: 20px;
      }
      th, td {
        border: 1px solid #ddd;
        padding: 8px;
      }
      th {
        background-color: #f2f2f2;
      }
      h1, h2 {
        color: #333;
      }
    </style>
  </head>
  <body>
    <h1>YouTube Channel Stats</h1>

    {% if error %}
      <p style="color: red">{{ error }}</p>
    {% else %}
      <h2>{{ channel_stats.title }}</h2>
      <p><strong>Description:</strong> {{ channel_stats.description }}</p>
      <p><strong>Subscribers:</strong> {{ channel_stats.subscriber_count }}</p>
      <p><strong>Total Views:</strong> {{ channel_stats.view_count }}</p>
      <p><strong>Total Videos:</strong> {{ channel_stats.video_count }}</p>

      <h2>ðŸ“Š Daily Performance (Last 30 Days)</h2>
      <table>
        <tr>
          <th>Date</th>
          <th>Views</th>
          <th>Watch Time (min)</th>
          <th>Avg View Duration (sec)</th>
          <th>Subs Gained</th>
          <th>Subs Lost</th>
        </tr>
        {% for day in daily_analytics %}
          <tr>
            <td>{{ day.0 }}</td>
            <td>{{ day.1 }}</td>
            <td>{{ day.2 }}</td>
            <td>{{ day.3 }}</td>
            <td>{{ day.4 }}</td>
            <td>{{ day.5 }}</td>
          </tr>
        {% endfor %}
      </table>

      <h2>ðŸ”¥ Top 5 Videos by Watch Time</h2>
      <table>
        <tr>
          <th>Video</th>
          <th>Watch Time (min)</th>
          <th>Views</th>
          <th>Avg View Duration (sec)</th>
        </tr>
        {% for video in top_videos %}
          <tr>
            <td><a href="{{ video.url }}" target="_blank">{{ video.video_id }}</a></td>
            <td>{{ video.watch_time }}</td>
            <td>{{ video.views }}</td>
            <td>{{ video.avg_view_duration }}</td>
          </tr>
        {% endfor %}
      </table>
    {% endif %}

    <p><a href="{% url 'youtube_auth_start' %}">ðŸ”„ Re-authenticate with YouTube</a></p>
  </body>
</html>
